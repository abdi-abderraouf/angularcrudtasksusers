"use strict";(self.webpackChunkuser=self.webpackChunkuser||[]).push([[955],{4955:(M,h,n)=>{n.r(h),n.d(h,{TasksModule:()=>L});var k=n(6895),c=n(8996),t=n(4650),f=n(5938),l=n(4006),d=n(529),m=n(1350);let T=(()=>{class s{constructor(e){this.http=e}detailTask(e){throw new Error("Method not implemented.")}getUserTasks(e,a){let i=new d.LE;return Object.entries(a).forEach(([r,g])=>{i=i.append(r,g)}),this.http.get(m.N.baseApi+"/user-tasks/"+e,{params:i})}completeTask(e){return this.http.put(m.N.baseApi+"/complete",e)}taskDetails(e){return this.http.get(m.N.baseApi+"/task/"+e)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(d.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var v=n(7185),u=n(4859),p=n(4333),C=n(3081);function Z(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7),t._UZ(3,"img",8),t.TgZ(4,"h2",9),t._uU(5),t.qZA(),t.TgZ(6,"p",10),t._uU(7),t.qZA(),t.TgZ(8,"p",11),t._uU(9),t.qZA(),t.TgZ(10,"a",12),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"button",13),t.NdJ("click",function(){const r=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.complete(r))}),t._uU(14),t.ALo(15,"translate"),t.qZA()()()()}if(2&s){const e=o.$implicit;t.xp6(3),t.Q6J("src","https://crud-hiz5.onrender.com/"+e.image,t.LSH),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.hij("Dead-Line Date : ",e.deadline,""),t.xp6(2),t.Oqu(e.description),t.xp6(1),t.MGl("routerLink","/dashboard/tasks/",e._id,""),t.xp6(1),t.Oqu(t.lcZ(12,7,"tasks.Details")),t.xp6(3),t.Oqu(t.lcZ(15,9,"tasks.Complete"))}}const x=function(s,o){return{id:"tasks",itemsPerPage:4,currentPage:s,totalItems:o}},D=[{path:"",component:(()=>{class s{constructor(e,a,i,r){this.dialog=e,this.fb=a,this.service=i,this.toaster=r,this.displayedColumns=["position","title","user","deadLineDate","status","actions"],this.dataSource=[],this.users=[{name:"Moahmed",id:1},{name:"Ali",id:2},{name:"Ahmed",id:3},{name:"Zain",id:4}],this.status=[{name:"Complete",id:1},{name:"In-Prossing",id:2}],this.page=1,this.selectedStatus="In-Progress",this.totalItems=0}ngOnInit(){this.createform(),this.getUserData(),this.getAllTasks()}createform(){this.tasksFilter=this.fb.group({title:[""],userId:[""],fromDate:[""],toDate:[""]})}getUserData(){let e=JSON.stringify(localStorage.getItem("token"));this.userData=JSON.parse(window.atob(e.split(".")[1]))}getAllTasks(){this.service.getUserTasks(this.userData.userId,{page:this.page,limits:10,status:this.selectedStatus}).subscribe(a=>{this.dataSource=a.tasks,this.totalItems=a.totalItems},a=>{this.dataSource=[]})}changePage(e){this.page=e,this.getAllTasks()}complete(e){this.service.completeTask({id:e._id}).subscribe(i=>{this.getAllTasks(),this.toaster.success("task complete successfully","complet avec success")})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(f.uw),t.Y36(l.qu),t.Y36(T),t.Y36(v._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-tasks"]],decls:6,vars:7,consts:[[1,"mt-4"],[1,"row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["id","tasks",3,"pageChange"],[1,"col-md-3"],[1,"card","mt-3"],[1,"card-body"],["alt","",3,"src"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["mat-raised-button","","color","basic","routerLinkActive","router-link-active",1,"card-link",3,"routerLink"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Z,16,11,"div",2),t.ALo(3,"paginate"),t.qZA(),t.TgZ(4,"div",3)(5,"pagination-controls",4),t.NdJ("pageChange",function(r){return a.changePage(r)}),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.xi3(3,1,a.dataSource,t.WLB(4,x,a.page,a.totalItems))))},dependencies:[u.lW,u.zs,k.sg,c.rH,c.Od,p.LS,C.X$,p._s],styles:["button[_ngcontent-%COMP%]{color:#fff;margin:0 5px}button.addTask[_ngcontent-%COMP%]{background-color:#ca085a;color:#fff;padding:2px 23px;font-size:20px}[_nghost-%COMP%]     table thead{background-color:#bc1059!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}.w-20[_ngcontent-%COMP%]{width:20%!important}h2[_ngcontent-%COMP%]{color:#bc1059}img[_ngcontent-%COMP%]{width:100%;height:180px!important}"]}),s})()},{path:":id",component:(()=>{class s{constructor(e,a){this.route=e,this.service=a,this.route.paramMap.subscribe(i=>{this.taskId=i.params.id})}ngOnInit(){this.getTaskDetails()}getTaskDetails(){this.service.taskDetails(this.taskId).subscribe(e=>{this.taskDetails=e.tasks,console.log("res",e)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.gz),t.Y36(T))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-task-details"]],decls:13,vars:4,consts:[[1,"container"],[1,"imageBox"],["alt","",1,"w-100",3,"src"],[1,"d-flex","justify-content-between","align-items-baseline","my-3"],[1,"card-title"],["mat-raised-button","","color","warn"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5),t.qZA(),t.TgZ(6,"button",5),t._uU(7,"Complete"),t.qZA()(),t.TgZ(8,"p",6),t._uU(9),t.qZA(),t._UZ(10,"hr"),t.TgZ(11,"p",7),t._uU(12),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("src","https://crud-hiz5.onrender.com/"+a.taskDetails.image,t.LSH),t.xp6(3),t.Oqu(a.taskDetails.title),t.xp6(4),t.hij("Dead-Line Date :",a.taskDetails.deadline,""),t.xp6(3),t.Oqu(a.taskDetails.description))},dependencies:[u.lW],styles:[".imageBox[_ngcontent-%COMP%], .imageBox[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px}"]}),s})()}];let b=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.Bz.forChild(D),c.Bz]}),s})();var A=n(8654),O=n(1757);let L=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[A.q,l.u5,l.UX,d.JF,k.ez,O.m,b,p.JX]}),s})()}}]);