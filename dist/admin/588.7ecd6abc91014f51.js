"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[588],{4588:(gt,v,r)=>{r.r(v),r.d(v,{ManageUsersModule:()=>pt});var m=r(6895),h=r(4006),x=r(529),y=r(9299),e=r(4650),I=r(7138),C=r(7185),b=r(4859),P=r(9549),M=r(4144),c=r(671),u=r(4333);function D(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1," No. "),e.qZA())}function S(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){const t=s.index;e.xp6(1),e.hij(" ",t+1," ")}}function O(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1," Name "),e.qZA())}function w(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.username," ")}}function L(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1," Email "),e.qZA())}function A(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.email," ")}}function E(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1," Tasks Assigned "),e.qZA())}function R(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.assignedTasks," ")}}function z(i,s){1&i&&e._UZ(0,"th",21)}function B(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),a=n.$implicit,l=n.index,d=e.oxw();return e.KtG(d.changeStatus(a._id,a.status,l))}),e._uU(1,"In-active"),e.qZA()}}function N(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),a=n.$implicit,l=n.index,d=e.oxw();return e.KtG(d.changeStatus(a._id,a.status,l))}),e._uU(1,"Active"),e.qZA()}}function U(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"td",20)(1,"div",22)(2,"button",23),e.NdJ("click",function(){const n=e.CHM(t),a=n.$implicit,l=n.index,d=e.oxw();return e.KtG(d.delete(a._id,l))}),e._uU(3,"Delete"),e.qZA(),e.YNc(4,B,2,0,"button",24),e.YNc(5,N,2,0,"button",25),e.qZA()()}if(2&i){const t=s.$implicit;e.xp6(4),e.Q6J("ngIf","Active"==t.status),e.xp6(1),e.Q6J("ngIf","Active"!==t.status)}}function F(i,s){1&i&&e._UZ(0,"tr",28)}function k(i,s){1&i&&e._UZ(0,"tr",29)}const V=function(i,s){return{itemsPerPage:5,currentPage:i,totalItems:s}},Z=[{path:"",component:(()=>{class i{constructor(t,o){this.service=t,this.toaster=o,this.displayedColumns=["position","name","email","tasksAssigned","actions"],this.dataSource=[]=[],this.page=1,this.Model={page:this.page,limit:5,name:""},this.model={page:this.page,limit:this.totalItems,name:""},this.getDataFromSubject()}ngOnInit(){this.getUser()}changePage(t){this.page=t,console.log("page act =",this.page),this.getUser(),console.log("Model ds changepage",this.Model)}delete(t,o){this.dataSource[o].assignedTasks>0?this.toaster.error("on ne peut pas supprimer ce user"):this.service.deleteserv(t).subscribe(n=>{this.toaster.success("user was deleted successfully"),this.getUser()})}changeStatus(t,o,n){if(this.dataSource[n].assignedTasks>0)this.toaster.error("on ne peut pas changer le statut de ce user");else{const a={id:"string",status:"string"};a.id=t,a.status=o,this.service.changeStatuserv(a).subscribe(l=>{this.toaster.success("status was changed"),this.getUser()})}}search(t){this.model.page=this.page,this.model.name=t.value,console.log("le Model ds search",this.model),clearTimeout(this.timeOutId),this.timeOutId=setTimeout(()=>{this.getUsersearch(this.model)},2e3)}getUsersearch(t){console.log("model ds getUser ds users",t),this.service.getAllUsers(t)}getUser(){const t={page:this.page,limit:5,name:""};console.log("model ds getUser ds users",t),this.service.getAllUsers(t)}getDataFromSubject(){this.service.userData.subscribe(t=>{console.log("reponse ds getDataFromSubject appele ds constructer",t),this.dataSource=t.data,this.totalItems=t.total})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I.f),e.Y36(C._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-users"]],decls:30,vars:9,consts:[[1,"mt-4"],[1,"row","mt-3"],[1,"col-md-3"],["appearance","outline",1,"w-100"],["matInput","","placeholder","name user search",3,"keyup"],[1,"listBox"],["mat-table","",1,"mat-elevation-z8","w-100","mt-2",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","tasksAssigned"],["matColumnDef","actions"],["mat-header-cell","","class","w-20",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"d-flex","justify-content-center"],[3,"pageChange"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"w-20"],[1,"d-flex"],["mat-raised-button","","color","warn",1,"mx-2",3,"click"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-success",3,"click",4,"ngIf"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["mat-raised-button","",1,"btn","btn-success",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Search"),e.qZA(),e.TgZ(7,"input",4),e.NdJ("keyup",function(a){return o.search(a.target)}),e.qZA()()()()(),e.TgZ(8,"div",5)(9,"table",6),e.ynx(10,7),e.YNc(11,D,2,0,"th",8),e.YNc(12,S,2,1,"td",9),e.BQk(),e.ynx(13,10),e.YNc(14,O,2,0,"th",8),e.YNc(15,w,2,1,"td",9),e.BQk(),e.ynx(16,11),e.YNc(17,L,2,0,"th",8),e.YNc(18,A,2,1,"td",9),e.BQk(),e.ynx(19,12),e.YNc(20,E,2,0,"th",8),e.YNc(21,R,2,1,"td",9),e.BQk(),e.ynx(22,13),e.YNc(23,z,1,0,"th",14),e.YNc(24,U,6,2,"td",9),e.BQk(),e.YNc(25,F,1,0,"tr",15),e.YNc(26,k,1,0,"tr",16),e.ALo(27,"paginate"),e.qZA(),e.TgZ(28,"div",17)(29,"pagination-controls",18),e.NdJ("pageChange",function(a){return o.changePage(a)}),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("dataSource",o.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",e.xi3(27,3,o.displayedColumns,e.WLB(6,V,o.page,o.totalItems))))},dependencies:[b.lW,P.KE,P.hX,M.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,h._Y,h.JL,h.F,u.LS,m.O5,u._s],styles:["[_nghost-%COMP%]     table thead{background-color:#bc1059!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}.w-20[_ngcontent-%COMP%]{width:20%!important}"]}),i})()}];let Y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[y.Bz.forChild(Z),y.Bz]}),i})();var j=r(1500),G=r(9027),g=r(3238),H=r(4385),T=r(8184),$=r(7253),X=r(5589);r(3353),r(7340);const q={provide:new e.OlP("mat-tooltip-scroll-strategy"),deps:[T.aV],useFactory:function W(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}};let et=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[q],imports:[$.rt,m.ez,T.U8,g.BQ,g.BQ,X.ZD]}),i})();var it=r(7579);let _=(()=>{class i{constructor(){this.changes=new it.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,o,n)=>{if(0==n||0==o)return`0 of ${n}`;const a=t*o;return`${a+1} \u2013 ${a<(n=Math.max(n,0))?Math.min(a+o,n):a+o} of ${n}`}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const rt={provide:_,deps:[[new e.FiY,new e.tp0,_]],useFactory:function at(i){return i||new _}};let lt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[rt],imports:[m.ez,b.ot,H.LD,et,g.BQ]}),i})(),pt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[j.q,h.u5,h.UX,Y,u.JX,lt,x.JF,m.ez,G.m]}),i})()}}]);